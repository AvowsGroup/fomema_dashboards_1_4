<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Fomema Dashboard</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="/assets/stylenew.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.4/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" type="text/css" href="/assets/daterangepicker.css" />
    <script type="text/javascript" src="/assets/jquery.min.js"></script>
    <script type="text/javascript" src="/assets/moment.min.js"></script>
    <script type="text/javascript" src="/assets/daterangepicker.min.js"></script>
  </head>
  <body>
    <div class="header">
      <nav class="navbar navbar-expand-md bg-light navbar-dark">
        <div class="admin-logo">
          <img src="../logo.png">
        </div>
        <!-- Topbar Search -->
        <div class="nav-title">
          <span>Dashboard </span>
          <h1>Department Information</h1>
        </div>
        <ul class="navbar-nav ml-auto">
          <li class="nav-item dropdown">
            <div class="filter-content mx-0 px-0" href="#" id="userDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              <div class="filter-li">
                <span>
                  <b>
                    <i class="fa fa-refresh" aria-hidden="true"></i>
                  </b> &nbsp;Refresh </span>
                <div class="dropdown-menu dropdown-menu-right shadow animated--grow-in m-0 p-0" aria-labelledby="userDropdown">
                  <ul class="li-profile">
                    <li onclick="five_min_reload()" style="border-bottom: dotted 1px #c2c2c2; font-size: 12px;">
                      <a class="dropdown-item"> 5 Min </a>
                    </li>
                    <li onclick="ten_min_reload()" style="border-bottom: dotted 1px #c2c2c2; font-size: 12px;">
                      <a class="dropdown-item">10 Min</a>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </li>
          <li class="nav-item dropdown mx-2">
            <a class="nav-link admin-name dropdown-toggle" href="#" id="userDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              <span>Dashboard</span>
            </a>
            <div class="dropdown-menu dropdown-menu-right shadow animated--grow-in m-0 p-0" aria-labelledby="userDropdown">
              <ul class="li-profile">
                <li style="border-bottom: dotted 1px #c2c2c2; font-size: 12px;">
                  <a class="dropdown-item" href="/first_dashboard/index">
                    <i class="fa fa-dashboard mx-2"></i>Dashboard 1 </a>
                </li>
                <li style="border-bottom: dotted 1px #c2c2c2; font-size: 12px;">
                  <a class="dropdown-item" href="/second_dashboard/index">
                    <i class="fa fa-dashboard mx-2"></i>Dashboard 2 </a>
                </li>
                <li style="border-bottom: dotted 1px #c2c2c2; font-size: 12px;">
                  <a class="dropdown-item" href="/third_dashboard/index">
                    <i class="fa fa-dashboard mx-2"></i>Dashboard 3 </a>
                </li>
                <li style="border-bottom: dotted 1px #c2c2c2; font-size: 12px;">
                  <a class="dropdown-item" href="dashboard-4.html">
                    <i class="fa fa-dashboard mx-2"></i>Dashboard 4 </a>
                </li>
                <li style="border-bottom: dotted 1px #c2c2c2; font-size: 12px;">
                  <a class="dropdown-item" href="dashboard-5.html">
                    <i class="fa fa-dashboard mx-2"></i>Dashboard 5 </a>
                </li>
              </ul>
            </div>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link admin-name dropdown-toggle" href="#" id="userDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              <span>Admin </span>
              <img class="img-profile rounded-circle" src="/assets/undraw_profile.svg">
            </a>
            <!-- Dropdown - User Information -->
            <div class="dropdown-menu dropdown-menu-right shadow animated--grow-in m-0 p-0" aria-labelledby="userDropdown">
              <ul class="li-profile">
                <li class="dropdown-item">
                  <a href="#">
                    <i class="fa fa-sign-out fa-sm"></i> Logout </a>
                </li>
              </ul>
            </div>
          </li>
        </ul>
      </nav>
    </div>
    <div class="filter-div">
      <ul class="filter mobile-filter mb-0">
        <li>
          <div class="month-filter">
            <div class="form-group">
              <div class="input-group">
                <div class="input-group-append">
                  <span class="input-group-text">
                    <i class="fa fa-calendar-plus-o"></i>
                  </span>
                </div>
                <select id="month" class="form-control" aria-label="Filter select">
                  <option value="Select Monthly"> Select Monthly </option>
                  <option value="January">January</option>
                  <option value="February">February</option>
                  <option value="March">March</option>
                  <option value="April">April</option>
                  <option value="May">May</option>
                  <option value="June">June</option>
                  <option value="July">July</option>
                  <option value="August">August</option>
                  <option value="September">September</option>
                  <option value="October">October</option>
                  <option value="November">November</option>
                  <option value="December">December</option>
                </select>
              </div>
            </div>
          </div>
        </li>
        <li>
          <div class="month-filter">
            <div class="form-group">
              <div class="input-group">
                <div class="input-group-append">
                  <span class="input-group-text">
                    <i class="fa fa-calendar-o"></i>
                  </span>
                </div>
                <select id="week" class="form-control" aria-label="Filter select">
                  <option value="Select Week"> Select Week</option>
                  <option value=1>Week 1</option>
                  <option value=2>Week 2</option>
                  <option value=3>Week 3</option>
                  <option value=4>Week 4</option>
                </select>
              </div>
            </div>
          </div>
        </li>
        <li class="mx-0">
          <div class="month-filter">
            <div class="form-group">
              <div class="input-group input-daterange">
                <div class="input-group-append">
                  <span class="input-group-text">
                    <i class="fa fa-calendar"></i>
                  </span>
                </div>
                <input type="text" class="form-control" name="daterange" value="01/01/2018 - 01/15/2018">
              </div>
            </div>
          </div>
          <script>
            $(function() {
              $('.datepicker').datepicker({
                language: "es",
                autoclose: true,
                format: "dd/mm/yyyy"
              });
            });
          </script>
          <script>
            $(document).ready(function() {
              $(function() {
                $('input[name="daterange"]').daterangepicker({
                  "startDate": "18/08/2023",
                  "endDate": "28/08/2023",
                  opens: 'center',
                  locale: {
                    format: 'DD/MM/YYYY'
                  }
                });
              });
            });
            $(document).ready(function() {
              $(".dropdown-toggle").click(function() {
                $(".caret").toggleClass('rotate-180');
              });
            });
          </script>
        </li>
        <li>
          <div class="month-filter ">
            <div class="filter-btn" style="margin-top: 5px;">
              <button class="btn-apply" onclick="filter_date(true)"> Apply</button>
              <button class="btn-clear" onclick="cancel_filter()">Clear</button>
            </div>
          </div>
        </li>
      </ul>
    </div>
    <div id="filter_cards"><%= render 'card_details'%> </div>
    </div>
    </div>
  </body>
</html>
<script>
  
  function filter_date(boolean) {
    const selectedWeek = $('#week').val();
    // Collect data from the date range input
    const dateRange = $('input[name="daterange"]').val();
    // Collect data from the district dropdown
    const selectedMonth = $('#month').val();
    // Create a JSON object
    const formData = {
      week: selectedWeek,
      dateRange: dateRange,
      month: selectedMonth,
      boolean: boolean
    };
    data = JSON.stringify(formData)
    $.ajax({
      url: 'third_db_data.js',
      type: "GET",
      data: data
    })
  }


  function cancel_filter() {
    $.ajax({
      url: 'index.js',
      type: "GET",
      data: ""
    })
  }

</script>

<script type="text/javascript">
    // href="/first_dashboard/excel_generate"

function five_min_reload(){
    setTimeout(function() {
      location.reload();
    }, 300000); 
}  
function ten_min_reload(){
    setTimeout(function() {
      location.reload();
    }, 600000); 
}  
</script>
